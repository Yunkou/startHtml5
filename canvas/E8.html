
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>使用Canvas元素绘制图像放大镜</title>
    <style type="text/css">
        *{margin: 0;padding: 0;}
        .canvas_warp{position: relative;}
        canvas{background: #efefef;position: absolute}
        #canvas1{z-index: 1;}
        #canvas2{z-index: 2;left: 0;top:0;border:thin dashed black; border-radius:40px;  position:absolute;}

    </style>
</head>
<body onload="windowOnLoad()">
<article>
    <h1>对图像使用放大镜</h1>
    <div class="canvas_warp">
    <canvas id="canvas1" width="800px" height="600px;"></canvas>
    <canvas id="canvas2" width="80px;" height="80px;"></canvas>
    </div>
</article>



<script type="text/javascript">
    window.onload=(function(){
        var canvas1 =document.getElementById('canvas1');
        var canvas2 =document.getElementById('canvas2');
        var context = canvas1.getContext('2d');
        var image =new Image();
        image.src='images/opera.png';
        context.drawImage(image,0,0);
        canvas1.onmouseover=canvas1_onmouse_move;

        function canvas1_onmouse_move(ev){
            var drawWidth,drawHeight;
            canvas1=document.getElementById('canvas1');
            var context2=canvas2.getContext('2d');

            canvas2.style.display='block';
            // context.clearRect(0,0,canvas2.width,canvas2.height);
            x=ev.pageX-canvas2.offsetWidth / 2;
            y=ev.pageY-canvas2.offsetHeight / 2 - 27;
            canvas2.style.left=x+"px";
            canvas2.style.top=y+"px";
            drawWidth=80;
            drawHeight=80;
            context2.drawImage(image,x+20,y+20,40,40,0,0,drawWidth,drawHeight);

        }
    })();



</script>
</body>
</html>